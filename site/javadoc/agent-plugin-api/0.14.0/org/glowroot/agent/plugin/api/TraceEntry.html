<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Mon May 15 22:08:26 CEST 2023 -->
<title>TraceEntry (Glowroot Agent Plugin API 0.14.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-05-15">
<meta name="description" content="declaration: package: org.glowroot.agent.plugin.api, interface: TraceEntry">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/TraceEntry.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.glowroot.agent.plugin.api</a></div>
<h1 title="Interface TraceEntry" class="title">Interface TraceEntry</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="AsyncQueryEntry.html" title="interface in org.glowroot.agent.plugin.api">AsyncQueryEntry</a></code>, <code><a href="AsyncTraceEntry.html" title="interface in org.glowroot.agent.plugin.api">AsyncTraceEntry</a></code>, <code><a href="QueryEntry.html" title="interface in org.glowroot.agent.plugin.api">QueryEntry</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">TraceEntry</span></div>
<div class="block">See <a href="ThreadContext.html#startTraceEntry(org.glowroot.agent.plugin.api.MessageSupplier,org.glowroot.agent.plugin.api.TimerName)"><code>ThreadContext.startTraceEntry(MessageSupplier, TimerName)</code></a> for how to create and use
 <code>TraceEntry</code> instances.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#end()" class="member-name-link">end</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">End the entry.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#endWithError(java.lang.String)" class="member-name-link">endWithError</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;message)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">End the entry and mark the trace entry as an error with the specified throwable.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#endWithError(java.lang.String,java.lang.Throwable)" class="member-name-link">endWithError</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;message,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;t)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">End the entry and add the specified <code>errorMessage</code> to the entry.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#endWithError(java.lang.Throwable)" class="member-name-link">endWithError</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;t)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">End the entry and mark the trace entry as an error with the specified throwable.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#endWithInfo(java.lang.Throwable)" class="member-name-link">endWithInfo</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;t)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">This method is the same as <a href="#endWithError(java.lang.Throwable)"><code>endWithError(Throwable)</code></a>, except that it won't escalate a
 dummy entry into a real entry.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#endWithLocationStackTrace(long,java.util.concurrent.TimeUnit)" class="member-name-link">endWithLocationStackTrace</a><wbr>(long&nbsp;threshold,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html" title="class or interface in java.util.concurrent" class="external-link">TimeUnit</a>&nbsp;unit)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">End the entry and capture a stack trace if its total time exceeds the specified
 <code>threshold</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="Timer.html" title="interface in org.glowroot.agent.plugin.api">Timer</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#extend()" class="member-name-link">extend</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Example of query and subsequent iterating over results which goes back to database and pulls
 more results.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getMessageSupplier()" class="member-name-link">getMessageSupplier</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the message supplier that was supplied when the <code>TraceEntry</code> was created.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="end()">
<h3>end</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">end</span>()</div>
<div class="block">End the entry.</div>
</section>
</li>
<li>
<section class="detail" id="endWithLocationStackTrace(long,java.util.concurrent.TimeUnit)">
<h3>endWithLocationStackTrace</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">endWithLocationStackTrace</span><wbr><span class="parameters">(long&nbsp;threshold,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html" title="class or interface in java.util.concurrent" class="external-link">TimeUnit</a>&nbsp;unit)</span></div>
<div class="block">End the entry and capture a stack trace if its total time exceeds the specified
 <code>threshold</code>.
 
 In case the trace has accumulated <code>maxTraceEntriesPerTransaction</code> entries and this is a
 dummy entry and its total time exceeds the specified threshold, then this dummy entry is
 escalated into a real entry. A hard cap (<code>maxTraceEntriesPerTransaction * 2</code>) on the
 total number of (real) entries is applied when escalating dummy entries to real entries.
 
 This is a no-op for async trace entries (those created by
 <a href="ThreadContext.html#startAsyncTraceEntry(org.glowroot.agent.plugin.api.MessageSupplier,org.glowroot.agent.plugin.api.TimerName)"><code>ThreadContext.startAsyncTraceEntry(MessageSupplier, TimerName)</code></a> and
 <a href="ThreadContext.html#startAsyncQueryEntry(java.lang.String,java.lang.String,org.glowroot.agent.plugin.api.QueryMessageSupplier,org.glowroot.agent.plugin.api.TimerName)"><code>ThreadContext.startAsyncQueryEntry(String, String, QueryMessageSupplier, TimerName)</code></a>).
 This is because async trace entries are used when their end is performed by a different
 thread, and so a stack trace at that time does not point to the code which executed triggered
 the trace entry creation.</div>
</section>
</li>
<li>
<section class="detail" id="endWithError(java.lang.Throwable)">
<h3>endWithError</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">endWithError</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;t)</span></div>
<div class="block">End the entry and mark the trace entry as an error with the specified throwable.
 
 The error message text is captured from <code>Throwable#getMessage()</code>.
 
 If this is the root entry, then the error flag on the transaction is set.
 
 In case the transaction has accumulated <code>maxTraceEntriesPerTransaction</code> entries and
 this is a dummy entry, then this dummy entry is escalated into a real entry. A hard cap (
 <code>maxTraceEntriesPerTransaction * 2</code>) on the total number of (real) entries is applied
 when escalating dummy entries to real entries.</div>
</section>
</li>
<li>
<section class="detail" id="endWithError(java.lang.String)">
<h3>endWithError</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">endWithError</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;message)</span></div>
<div class="block">End the entry and mark the trace entry as an error with the specified throwable.
 
 If this is the root entry, then the error flag on the transaction is set.
 
 In case the transaction has accumulated <code>maxTraceEntriesPerTransaction</code> entries and
 this is a dummy entry, then this dummy entry is escalated into a real entry. A hard cap (
 <code>maxTraceEntriesPerTransaction * 2</code>) on the total number of (real) entries is applied
 when escalating dummy entries to real entries.</div>
</section>
</li>
<li>
<section class="detail" id="endWithError(java.lang.String,java.lang.Throwable)">
<h3>endWithError</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">endWithError</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;message,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;t)</span></div>
<div class="block">End the entry and add the specified <code>errorMessage</code> to the entry.
 
 If <code>message</code> is empty or null, then the error message text is captured from
 <code>Throwable#getMessage()</code>.
 
 If this is the root entry, then the error flag on the transaction is set.
 
 In case the transaction has accumulated <code>maxTraceEntriesPerTransaction</code> entries and
 this is a dummy entry, then this dummy entry is escalated into a real entry. A hard cap (
 <code>maxTraceEntriesPerTransaction * 2</code>) on the total number of (real) entries is applied
 when escalating dummy entries to real entries.</div>
</section>
</li>
<li>
<section class="detail" id="endWithInfo(java.lang.Throwable)">
<h3>endWithInfo</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">endWithInfo</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;t)</span></div>
<div class="block">This method is the same as <a href="#endWithError(java.lang.Throwable)"><code>endWithError(Throwable)</code></a>, except that it won't escalate a
 dummy entry into a real entry.</div>
</section>
</li>
<li>
<section class="detail" id="extend()">
<h3>extend</h3>
<div class="member-signature"><span class="return-type"><a href="Timer.html" title="interface in org.glowroot.agent.plugin.api">Timer</a></span>&nbsp;<span class="element-name">extend</span>()</div>
<div class="block">Example of query and subsequent iterating over results which goes back to database and pulls
 more results.
 
 Important note for async trace entries (those created by
 <a href="ThreadContext.html#startAsyncTraceEntry(org.glowroot.agent.plugin.api.MessageSupplier,org.glowroot.agent.plugin.api.TimerName)"><code>ThreadContext.startAsyncTraceEntry(MessageSupplier, TimerName)</code></a> and
 <a href="ThreadContext.html#startAsyncQueryEntry(java.lang.String,java.lang.String,org.glowroot.agent.plugin.api.QueryMessageSupplier,org.glowroot.agent.plugin.api.TimerName)"><code>ThreadContext.startAsyncQueryEntry(String, String, QueryMessageSupplier, TimerName)</code></a>):
 this method should not be used by a thread other than the one that created the async trace
 entry.</div>
</section>
</li>
<li>
<section class="detail" id="getMessageSupplier()">
<h3>getMessageSupplier</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">getMessageSupplier</span>()</div>
<div class="block">Returns the message supplier that was supplied when the <code>TraceEntry</code> was created.
 
 This can be useful (for example) to retrieve the message supplier in @<a href="weaving/OnReturn.html" title="annotation interface in org.glowroot.agent.plugin.api.weaving"><code>OnReturn</code></a> so
 that the return value can be added to the message produced by the <code>MessageSupplier</code>.
 
 This returns the message supplier even if the trace has accumulated
 <code>maxTraceEntriesPerTransaction</code> entries and this is a dummy entry.
 
 Under some error conditions this can return <code>null</code>.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2011&#x2013;2023 <a href="https://github.com/glowroot">Glowroot contributors</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
